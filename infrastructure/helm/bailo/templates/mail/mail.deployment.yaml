{{- if .Values.maildev.enabled }}
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: maildev
spec:
  replicas: 1
  selector:
    matchLabels:
      name: maildev
  template:
    metadata:
      labels:
        name: maildev
    spec:
      containers:
      - name: maildev
        image: maildev/maildev:2.0.2
        args: ["-s", "{{ .Values.config.smtp.port }}", "-w", "1080"]
        env:
        - name: MAILDEV_INCOMING_USER
          value: {{ .Values.config.smtp.user }}
        - name: MAILDEV_INCOMING_PASS
          value: {{ .Values.config.smtp.pass }}
{{- end }}